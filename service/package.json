{
    "name": "sanity-runner-service",
    "version": "5.0.0",
    "description": "Distributed Sanity Test Suite Runner",
    "main": "service/handler.js",
    "scripts": {
        "clean": "rm -rf dist .cache && mkdir -p dist",
        "lint:typecheck": "run -T tsc -p tsconfig.json --noEmit",
        "build:testhooks": "run -T esbuild src/testHooks/* --platform=node --target=node16 --outdir=dist/testHooks --external:../node_modules/\\* --bundle",
        "build:handler": "run -T esbuild src/lambdaHandler.ts --bundle --platform=node --target=node16 --outfile=dist/lambdaHandler.js --external:./testHooks/\\* --external:../node_modules/babel\\* --external:../node_modules/jest\\* --external:../node_modules/@jest\\* --external:../node_modules/@aws-sdk\\* --external:../node_modules/@sparticuz\\* --external:../node_modules/puppeteer\\*",
        "build": "run build:testhooks && run build:handler",
        "prepack": "run clean && run build",
        "docker:build": "docker build ../ -f service.Dockerfile -t ghcr.io/tophat/sanity-runner-service",
        "docker:build:local": "docker build ../ -f service-local.Dockerfile -t ghcr.io/tophat/sanity-runner-service",
        "docker:run:local": "docker run -p 9000:8080 --mount type=bind,source=$(abspath ../node_modules 2>/dev/null || realpath ../node_modules),target=/var/task/node_modules,readonly --mount type=bind,source=$(abspath ./dist 2>/dev/null || realpath ./dist),target=/var/task/service/dist,readonly ghcr.io/tophat/sanity-runner-service:latest",
        "dev": "run build && run docker:build:local && run docker:run:local",
        "docker:tag": "docker tag ghcr.io/tophat/sanity-runner-service:latest ghcr.io/tophat/sanity-runner-service:$(cat package.json | jq -r '.version')",
        "docker:tag:prerelease": "docker tag ghcr.io/tophat/sanity-runner-service:latest ghcr.io/tophat/sanity-runner-service:next",
        "docker:push": "docker push ghcr.io/tophat/sanity-runner-service:$(cat package.json | jq -r '.version')",
        "docker:push:latest": "docker push ghcr.io/tophat/sanity-runner-service:latest",
        "docker:push:prerelease": "docker push ghcr.io/tophat/sanity-runner-service:next"
    },
    "repository": {
        "type": "git",
        "url": "https://github.com/tophat/sanity-runner.git",
        "directory": "service"
    },
    "author": "Top Hat Monocle Corp. <opensource@tophat.com>",
    "license": "Apache-2.0",
    "url": "https://github.com/tophat/sanity-runner/issues",
    "homepage": "https://github.com/tophat/sanity-runner#readme",
    "devDependencies": {
        "@tophat/sanity-runner-plugin-fullstory": "workspace:*",
        "@tophat/sanity-runner-plugin-pagerduty": "workspace:*",
        "@tophat/sanity-runner-plugin-slack": "workspace:*",
        "@tophat/sanity-runner-types": "workspace:*",
        "@types/async-retry": "^1.4.4",
        "@types/expect-puppeteer": "^4.4.7",
        "@types/jest": "^28.1.4",
        "@types/jest-environment-puppeteer": "^5.0.2",
        "@types/node": "^16.11.36",
        "@types/uuid": "^8.3.4",
        "@types/xml2js": "^0.4.11"
    },
    "dependencies": {
        "@aws-sdk/client-s3": "^3.121.0",
        "@aws-sdk/client-secrets-manager": "^3.121.0",
        "@aws-sdk/s3-request-presigner": "^3.121.0",
        "@jest/core": "^28.1.0",
        "@jest/reporters": "^28.1.0",
        "@jest/test-result": "^28.1.0",
        "@jest/types": "^28.1.0",
        "@sparticuz/chrome-aws-lambda": "^14.1.0",
        "@types/aws-lambda": "^8.10.93",
        "@types/puppeteer": "^5.4.5",
        "async-retry": "^1.3.3",
        "expect-puppeteer": "^6.1.0",
        "jest": "^28.1.0",
        "jest-docblock": "^28.0.2",
        "jest-environment-node": "^28.1.0",
        "jest-junit": "^13.2.0",
        "puppeteer-core": "^14.1.1",
        "tapable": "^2.2.1",
        "uuid": "^8.3.2",
        "winston": "^3.8.1",
        "xml2js": "^0.4.23"
    }
}
